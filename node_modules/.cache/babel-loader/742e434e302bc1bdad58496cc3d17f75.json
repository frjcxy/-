{"remainingRequest":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Asus\\Desktop\\lcsc-demo\\src\\components\\pages\\memberPages\\serve\\favorite.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\src\\components\\pages\\memberPages\\serve\\favorite.vue","mtime":1560738790684},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Asus\\\\Desktop\\\\lcsc-demo\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from \"moment\";\nexport default {\n  inject: [\"reload\"],\n  data: function data() {\n    return {\n      // 对话框\n      buyDialogVisible: false,\n      currentPage4: 4,\n      setCollectData: [],\n      singleCommodityProduct: {},\n      singleProductLadder: [],\n      changePrice: 0,\n      buyNum: 1,\n      // 全选\n      checkAll: false,\n      checkModel: [],\n      selectedGoods: [],\n      //选中的商品\n      idArr: [] //选中的id\n\n    };\n  },\n  created: function created() {\n    this.getCollectList();\n  },\n  // 过滤器\n  filters: {\n    formatTime: function formatTime(value) {\n      // 处理时间 并返回 基于moment\n      return moment(value).format(\"YYYY-MM-DD HH:mm:ss\");\n    }\n  },\n  methods: {\n    // 获取收藏夹列表\n    getCollectList: function () {\n      var _getCollectList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$http.get(\"/api/member/collection/listProduct\");\n\n              case 2:\n                res = _context.sent;\n                console.log(res);\n                this.setCollectData = res.data;\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getCollectList() {\n        return _getCollectList.apply(this, arguments);\n      }\n\n      return getCollectList;\n    }(),\n    // 取消收藏\n    delCollect: function delCollect(id) {\n      var _this = this;\n\n      this.$confirm(\"确定要取消收藏？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.$http.get(\"/api/member/collection/deleteProduct?productIds=\".concat(id));\n\n              case 2:\n                res = _context2.sent;\n\n                _this.$message({\n                  type: \"success\",\n                  message: \"删除成功!\"\n                });\n\n                _this.getCollectList();\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))).catch(function () {\n        _this.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    // 取消收藏多个\n    delCollectList: function delCollectList() {\n      var _this2 = this;\n\n      if (this.checkModel.length <= 0) {\n        this.$message({\n          type: \"warning\",\n          message: \"请勾选要取消收藏的商品！\"\n        });\n      } else {\n        this.selectedGoods.forEach(function (res) {\n          console.log(res);\n\n          _this2.idArr.push(res.product.id);\n        });\n        this.delCollect(this.idArr);\n      }\n    },\n    // 商品价格\n    howMany: function howMany() {\n      var _this3 = this;\n\n      this.singleProductLadder.forEach(function (pri, index) {\n        if (_this3.buyNum >= _this3.singleProductLadder[index].count) {\n          _this3.changePrice = _this3.singleProductLadder[index].price;\n        } else if (_this3.buyNum <= _this3.singleProductLadder[0].count) {\n          _this3.changePrice = _this3.singleProductLadder[0].price;\n        }\n      });\n    },\n    //加入购物车弹框\n    showDialog: function showDialog(index) {\n      this.buyDialogVisible = true;\n      this.singleCommodityProduct = this.setCollectData[index].product;\n      this.singleProductLadder = this.setCollectData[index].productLadder;\n      this.changePrice = this.singleProductLadder[0].price;\n    },\n    // 加入购物车\n    addToShopCart: function () {\n      var _addToShopCart = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var data, res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.buyDialogVisible = false;\n                data = {\n                  brandName: this.singleCommodityProduct.brandName,\n                  picPath: this.singleCommodityProduct.pic,\n                  productId: this.singleCommodityProduct.id,\n                  productName: this.singleCommodityProduct.name,\n                  productNumber: this.buyNum,\n                  productPrice: this.changePrice,\n                  productSn: this.singleCommodityProduct.productSn,\n                  productSpecifications: this.singleCommodityProduct.productSpecifications,\n                  productType: this.singleCommodityProduct.productType,\n                  unit: this.singleCommodityProduct.unit,\n                  unitNum: this.singleCommodityProduct.unitNum,\n                  stock: this.singleCommodityProduct.stock\n                };\n                _context3.next = 4;\n                return this.$http.post(\"/api/member/cart/add\", data);\n\n              case 4:\n                res = _context3.sent;\n                this.$message({\n                  type: \"success\",\n                  message: \"已加入购物车！\"\n                });\n                this.reload(); //刷新当前页\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function addToShopCart() {\n        return _addToShopCart.apply(this, arguments);\n      }\n\n      return addToShopCart;\n    }(),\n    // 实现多选框全选反选功能\n    setCheckedAll: function setCheckedAll(val) {\n      var _this4 = this;\n\n      this.checkModel = val ? this.setCollectData : [];\n\n      if (this.checkAll) {\n        this.setCollectData.forEach(function (res) {\n          _this4.selectedGoods = _this4.setCollectData;\n        });\n      }\n    },\n    setCheckedModel: function setCheckedModel(value) {\n      var checkedCount = value.length;\n      this.checkAll = checkedCount === this.setCollectData.length;\n      this.selectedGoods = value;\n    },\n    // 分页\n    handleSizeChange: function handleSizeChange(val) {\n      console.log(\"\\u6BCF\\u9875 \".concat(val, \" \\u6761\"));\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      console.log(\"\\u5F53\\u524D\\u9875: \".concat(val));\n    }\n  }\n};",{"version":3,"sources":["favorite.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"favorite\">\r\n    <!-- 我的收藏 -->\r\n    <div class=\"member-title\">\r\n      <h3>我的收藏</h3>\r\n    </div>\r\n    <div class=\"classify\">\r\n      <el-row>\r\n        <el-col :span=\"4\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <span class=\"find\">按分类查找</span>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"16\">\r\n          <div class=\"grid-content bg-purple-light\">\r\n            <ul>\r\n              <li>\r\n                <a href=\"#\" class=\"all\">全部分类（15）</a>\r\n              </li>\r\n              <li>\r\n                <a href=\"#\">\r\n                  占位\r\n                  <i>(0)</i>\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a href=\"#\">\r\n                  占位\r\n                  <i>(0)</i>\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a href=\"#\">\r\n                  占位\r\n                  <i>(0)</i>\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a href=\"#\">\r\n                  占位\r\n                  <i>(0)</i>\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a href=\"#\">\r\n                  占位\r\n                  <i>(0)</i>\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a href=\"#\">\r\n                  占位\r\n                  <i>(0)</i>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <a href=\"#\">\r\n              更多\r\n              <i class=\"el-icon-arrow-down\"></i>\r\n            </a>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <!-- 收藏的商品信息 -->\r\n    <div class=\"commodity-information\" v-for=\"(item,index) in setCollectData\" :key=\"index\">\r\n      <el-row>\r\n        <el-col :span=\"1\" class=\"checkbox\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <el-checkbox-group v-model=\"checkModel\" @change=\"setCheckedModel\">\r\n              <el-checkbox :label=\"item\">\r\n                <img :src=\"item.product.pic\" alt>\r\n              </el-checkbox>\r\n            </el-checkbox-group>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"4\" class=\"img\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <img :src=\"item.product.pic\" alt>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\" class=\"message\">\r\n          <div class=\"grid-content bg-purple-light\">\r\n            <ul>\r\n              <li>\r\n                <span>商品编号：</span>\r\n                <i>{{item.product.productSn}}</i>\r\n              </li>\r\n              <li>\r\n                <a href=\"javascript:;\">{{item.product.name}}</a>\r\n              </li>\r\n              <li>\r\n                <span>{{item.product.productType}}</span>\r\n                <i></i>\r\n              </li>\r\n\r\n              <li>\r\n                <span>收藏时间：</span>\r\n                <i>{{item.collectionTime | formatTime}}</i>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"5\" class=\"tax\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <ul>\r\n              <li v-for=\"it in item.productLadder\" :key=\"it.id\">\r\n                <span>{{it.count}}+ ：</span>\r\n                <i>￥{{it.price}}</i>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"6\" class=\"btn\">\r\n          <div class=\"grid-content bg-purple-light\">\r\n            <el-button type=\"warning\" plain @click=\"delCollect(item.product.id)\">取消收藏</el-button>\r\n            <el-button type=\"success\" plain @click=\"buyDialogVisible=true,showDialog(index)\">加入购物车</el-button>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 点击加入购物车弹窗 -->\r\n      <el-dialog title=\"添加购物车\" :visible.sync=\"buyDialogVisible\" width=\"40%\">\r\n        <div class=\"content\">\r\n          <div class=\"left\">\r\n            <ul>\r\n              <li>\r\n                <span>商品名称：</span>\r\n                <i>{{singleCommodityProduct.name}}</i>\r\n              </li>\r\n              <li>\r\n                <span>原厂型号：</span>\r\n                <i>{{singleCommodityProduct.productType}}</i>\r\n              </li>\r\n              <li>\r\n                <span>品&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;牌：</span>\r\n                <i>{{singleCommodityProduct.brandName}}</i>\r\n              </li>\r\n              <li>\r\n                <span>封装规格：</span>\r\n                <i>{{singleCommodityProduct.productSpecifications}}</i>\r\n              </li>\r\n              <li>\r\n                <span>现货库存：</span>\r\n                <i>{{singleCommodityProduct.stock}}个</i>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"right\">\r\n            <ul>\r\n              <li>含增值税</li>\r\n              <li v-for=\"it in singleProductLadder\" :key=\"it.id\">\r\n                <span>{{it.count}}+ :</span>\r\n                <i>￥{{it.price}}</i>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <div></div>\r\n          <ul>\r\n            <li>\r\n              <span>购买数量：</span>\r\n              <input\r\n                min=\"1\"\r\n                :max=\"singleCommodityProduct.stock\"\r\n                type=\"number\"\r\n                v-model=\"buyNum\"\r\n                @input=\"howMany\"\r\n              > ✖\r\n              <i>￥{{changePrice}}</i> =\r\n              <i>￥{{(buyNum*changePrice).toFixed(2)}}</i>\r\n            </li>\r\n            <li>\r\n              <span>购买数量：</span>\r\n              <input type=\"number\">\r\n              <span>\r\n                {{singleCommodityProduct.unit}}（1{{singleCommodityProduct.unit}}有）\r\n                <i>{{singleCommodityProduct.unitNum}}</i>个\r\n              </span>\r\n            </li>\r\n            <li class=\"add_shop_cart\">\r\n              <el-button type=\"warning\" @click=\"addToShopCart()\">加入购物车</el-button>\r\n            </li>\r\n          </ul>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n\r\n    <!-- 全选及分页 -->\r\n    <div class=\"check-all\">\r\n      <el-row>\r\n        <el-col :span=\"10\" class=\"check-btn\">\r\n          <div class=\"grid-content bg-purple\">\r\n            <el-checkbox v-model=\"checkAll\" @change=\"setCheckedAll\">全选</el-checkbox>\r\n            <el-button type=\"warning\" plain @click=\"delCollectList\">取消收藏</el-button>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"14\">\r\n          <div class=\"grid-content bg-purple-light\">\r\n            <el-pagination\r\n              class=\"pages\"\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page=\"currentPage4\"\r\n              :page-sizes=\"[100, 200, 300, 400]\"\r\n              :page-size=\"100\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"400\"\r\n            ></el-pagination>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport moment from \"moment\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      // 对话框\r\n      buyDialogVisible: false,\r\n      currentPage4: 4,\r\n      setCollectData: [],\r\n      singleCommodityProduct: {},\r\n      singleProductLadder: [],\r\n      changePrice: 0,\r\n      buyNum: 1,\r\n      // 全选\r\n      checkAll: false,\r\n      checkModel: [],\r\n      selectedGoods: [], //选中的商品\r\n      idArr: []//选中的id\r\n    };\r\n  },\r\n  created() {\r\n    this.getCollectList();\r\n  },\r\n  // 过滤器\r\n  filters: {\r\n    formatTime(value) {\r\n      // 处理时间 并返回 基于moment\r\n      return moment(value).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取收藏夹列表\r\n    async getCollectList() {\r\n      let res = await this.$http.get(\"/api/member/collection/listProduct\");\r\n       console.log(res);\r\n      this.setCollectData = res.data;\r\n    },\r\n\r\n    // 取消收藏\r\n    delCollect(id) {\r\n      this.$confirm(\"确定要取消收藏？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(async () => {\r\n          let res = await this.$http.get(\r\n            `/api/member/collection/deleteProduct?productIds=${id}`\r\n          );\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功!\"\r\n          });\r\n          this.getCollectList();\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n\r\n     // 取消收藏多个\r\n    delCollectList() {\r\n      if (this.checkModel.length <= 0) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请勾选要取消收藏的商品！\"\r\n        });\r\n      } else {\r\n        this.selectedGoods.forEach(res => {\r\n          console.log(res);\r\n          \r\n          this.idArr.push(res.product.id);\r\n        });\r\n        this.delCollect(this.idArr);\r\n        \r\n      }\r\n    },\r\n\r\n    // 商品价格\r\n    howMany() {\r\n      this.singleProductLadder.forEach((pri, index) => {\r\n        if (this.buyNum >= this.singleProductLadder[index].count) {\r\n          this.changePrice = this.singleProductLadder[index].price;\r\n        } else if (this.buyNum <= this.singleProductLadder[0].count) {\r\n          this.changePrice = this.singleProductLadder[0].price;\r\n        }\r\n      });\r\n    },\r\n\r\n    //加入购物车弹框\r\n    showDialog(index) {\r\n      this.buyDialogVisible = true;\r\n      this.singleCommodityProduct = this.setCollectData[index].product;\r\n      this.singleProductLadder = this.setCollectData[index].productLadder;\r\n      this.changePrice = this.singleProductLadder[0].price;\r\n    },\r\n    // 加入购物车\r\n    async addToShopCart() {\r\n      this.buyDialogVisible = false;\r\n      let data = {\r\n        brandName: this.singleCommodityProduct.brandName,\r\n        picPath: this.singleCommodityProduct.pic,\r\n        productId: this.singleCommodityProduct.id,\r\n        productName: this.singleCommodityProduct.name,\r\n        productNumber: this.buyNum,\r\n        productPrice: this.changePrice,\r\n        productSn: this.singleCommodityProduct.productSn,\r\n        productSpecifications: this.singleCommodityProduct\r\n          .productSpecifications,\r\n        productType: this.singleCommodityProduct.productType,\r\n        unit: this.singleCommodityProduct.unit,\r\n        unitNum: this.singleCommodityProduct.unitNum,\r\n        stock: this.singleCommodityProduct.stock\r\n      };\r\n      let res = await this.$http.post(\"/api/member/cart/add\", data);\r\n      this.$message({\r\n        type: \"success\",\r\n        message: \"已加入购物车！\"\r\n      });\r\n      this.reload(); //刷新当前页\r\n    },\r\n\r\n    // 实现多选框全选反选功能\r\n    setCheckedAll(val) {\r\n      this.checkModel = val ? this.setCollectData : [];\r\n      if (this.checkAll) {\r\n        this.setCollectData.forEach(res => {\r\n          this.selectedGoods = this.setCollectData;\r\n        });\r\n      }\r\n    },\r\n    setCheckedModel(value) {\r\n      let checkedCount = value.length;\r\n      this.checkAll = checkedCount === this.setCollectData.length;\r\n      this.selectedGoods = value;\r\n    },\r\n    // 分页\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scope>\r\n#favorite {\r\n  .classify {\r\n    border: 1px solid #e5e5e5;\r\n    padding: 10px 0;\r\n    .el-col {\r\n      text-align: center;\r\n      line-height: 24px;\r\n      &:nth-of-type(2) {\r\n        text-align: left;\r\n        ul {\r\n          li {\r\n            display: inline-block;\r\n            width: 150px;\r\n            word-break: break-all;\r\n            overflow: auto;\r\n          }\r\n        }\r\n      }\r\n\r\n      &:nth-of-type(3) {\r\n        a {\r\n          &:hover {\r\n            color: #0193e6;\r\n            i {\r\n              border: 1px solid #0193e6;\r\n              color: #0193e6;\r\n            }\r\n          }\r\n          i {\r\n            font-weight: bold;\r\n            padding: 4px;\r\n            border: 1px solid #a8a8a8;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .find {\r\n      padding: 4px 10px;\r\n      background-color: #0193e6;\r\n      color: #fff;\r\n    }\r\n  }\r\n\r\n  .commodity-information {\r\n    padding: 20px;\r\n    margin-top: 15px;\r\n    border: 1px solid #e5e5e5;\r\n    .checkbox {\r\n      text-align: center;\r\n      .el-checkbox__input {\r\n        vertical-align: top;\r\n      }\r\n      img {\r\n        display: block;\r\n        width: 80px;\r\n        height: 80px;\r\n      }\r\n    }\r\n\r\n    .img {\r\n      text-align: center;\r\n      img {\r\n        width: 80px;\r\n        height: 80px;\r\n      }\r\n    }\r\n    .message {\r\n      ul {\r\n        li {\r\n          line-height: 24px;\r\n          &:nth-of-type(2) {\r\n            a {\r\n              color: #0193e6;\r\n            }\r\n          }\r\n\r\n          &:nth-of-type(5) {\r\n            i {\r\n              color: #999;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .tax {\r\n      ul {\r\n        li {\r\n          line-height: 24px;\r\n          span {\r\n            display: inline-block;\r\n            width: 114px;\r\n            text-align: right;\r\n          }\r\n          i {\r\n            font-weight: bold;\r\n            color: #ff7900;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .btn {\r\n      margin-top: 50px;\r\n      text-align: center;\r\n    }\r\n  }\r\n  // 本页面按钮公共样式\r\n  .el-button {\r\n    padding: 6px 10px;\r\n  }\r\n\r\n  .check-all {\r\n    padding: 20px 20px 20px 33px;\r\n    margin-top: 15px;\r\n    border: 1px solid #e5e5e5;\r\n  }\r\n  // 弹窗的样式\r\n  .el-dialog__header {\r\n    background: #f2f2f2;\r\n    border-bottom: 1px solid #dedede;\r\n    .el-dialog__title {\r\n      font-size: 14px;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n  .content {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    font-size: 12px;\r\n    .left {\r\n      ul {\r\n        li {\r\n          line-height: 40px;\r\n          span {\r\n            color: #9a9a9a;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .right {\r\n      ul {\r\n        li {\r\n          line-height: 30px;\r\n          &:nth-of-type(1) {\r\n            text-align: center;\r\n          }\r\n          span {\r\n            display: inline-block;\r\n            width: 100px;\r\n            text-align: right;\r\n          }\r\n          i {\r\n            color: #ff7b00;\r\n            margin-left: 5px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .dialog-footer {\r\n    display: flex;\r\n    div {\r\n      width: 300px;\r\n    }\r\n    ul {\r\n      flex: 1;\r\n      li {\r\n        text-align: left;\r\n        line-height: 30px;\r\n        &:nth-of-type(1) {\r\n          input {\r\n            color: #ee7600;\r\n          }\r\n\r\n          i {\r\n            color: #ee7600;\r\n            &:nth-last-of-type(1) {\r\n              font-size: 14px;\r\n              font-weight: bold;\r\n            }\r\n          }\r\n        }\r\n        input {\r\n          width: 60px;\r\n\r\n          padding-left: 4px;\r\n        }\r\n        &:nth-last-of-type(1) {\r\n          margin: 5px 0 20px;\r\n          .el-button {\r\n            padding: 10px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/components/pages/memberPages/serve"}]}
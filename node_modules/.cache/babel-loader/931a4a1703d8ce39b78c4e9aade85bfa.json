{"remainingRequest":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Asus\\Desktop\\lcsc-demo\\src\\components\\pages\\tabPages\\shoppingCart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\src\\components\\pages\\tabPages\\shoppingCart.vue","mtime":1560738790693},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Asus\\Desktop\\lcsc-demo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Asus\\\\Desktop\\\\lcsc-demo\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { log } from \"util\";\nimport { Promise } from \"q\";\nimport { promises } from \"fs\";\nexport default {\n  inject: [\"reload\"],\n  data: function data() {\n    return {\n      isDisable: false,\n      checkModel: [],\n      checkAll: false,\n      // 全选\n      popUpBox: false,\n      // 增值税弹出框\n      getTotalPrice: 0,\n      // 商品总价\n      orderList: [],\n      //订单列表信息\n      selectedGoods: [],\n      //选中的商品\n      goodsShow: false,\n      idArr: []\n    };\n  },\n  created: function created() {\n    this.getShoppingCartData();\n    this.common.setCheckedAll();\n  },\n  methods: {\n    refurbish: function refurbish() {\n      this.$router.push(\"/\");\n      this.reload();\n    },\n    //回到首页\n    goToindex: function goToindex() {\n      this.reload();\n      this.$router.push(\"/\");\n    },\n    // 获取购物车列表\n    getShoppingCartData: function () {\n      var _getShoppingCartData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$http.post(\"/api/member/cart/list\");\n\n              case 2:\n                res = _context.sent;\n                this.orderList = res.data;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getShoppingCartData() {\n        return _getShoppingCartData.apply(this, arguments);\n      }\n\n      return getShoppingCartData;\n    }(),\n    // 实现多选框全选反选功能\n    setCheckedAll: function setCheckedAll(val) {\n      var _this = this;\n\n      this.checkModel = val ? this.orderList : [];\n\n      if (this.checkAll) {\n        this.orderList.forEach(function (res) {\n          _this.selectedGoods = _this.orderList;\n          _this.getTotalPrice += res.productNumber * res.productPrice;\n        });\n      } else {\n        this.getTotalPrice = 0;\n      }\n    },\n    setCheckedModel: function setCheckedModel(value) {\n      var _this2 = this;\n\n      var checkedCount = value.length;\n      this.checkAll = checkedCount === this.orderList.length;\n      this.getTotalPrice = 0;\n      value.forEach(function (res) {\n        _this2.getTotalPrice += res.productNumber * res.productPrice;\n      });\n      this.selectedGoods = value;\n    },\n    // 跳转到收藏夹\n    goToCollect: function goToCollect() {\n      this.$router.push(\"/shopping/member/favorite\");\n      this.reload();\n    },\n    // 计数器\n    handleChange: function handleChange(value) {\n      console.log(value); // this.getTotalPrice = value\n    },\n    // 增值税显示隐藏\n    boxShow: function boxShow(id) {\n      this.popUpBox = true;\n    },\n    boxHide: function boxHide(id) {\n      this.popUpBox = false;\n    },\n    // 删除购物车商品接口\n    delCartProduct: function () {\n      var _delCartProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(ids) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$http.post(\"/api/member/cart/delete?productId=\".concat(ids));\n\n              case 2:\n                res = _context2.sent;\n\n                if (res.code === 200) {\n                  this.$message({\n                    type: \"success\",\n                    message: \"操作成功！\"\n                  });\n                  this.getShoppingCartData();\n                } else {\n                  this.$message({\n                    type: \"warning\",\n                    message: \"删除失败！\"\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function delCartProduct(_x) {\n        return _delCartProduct.apply(this, arguments);\n      }\n\n      return delCartProduct;\n    }(),\n    // 删除单个商品事件\n    delQuote: function delQuote(id) {\n      var _this3 = this;\n\n      this.$confirm(\"您可以选择删除商品，或移入收藏夹。\", \"您是要删除该商品吗？\", {\n        confirmButtonText: \"移入收藏夹\",\n        cancelButtonText: \"删除\",\n        type: \"warning\",\n        center: true,\n        closeOnPressEscape: false,\n        distinguishCancelAndClose: true\n      }).then(function () {\n        // 移入收藏夹\n        _this3.collectionGoods(id);\n      }).catch(function (action) {\n        message: action === \"cancel\" ? _this3.delCartProduct(id) : \"\";\n      });\n    },\n    //删除多个商品事件\n    delMultiple: function delMultiple() {\n      var _this4 = this;\n\n      this.selectedGoods.forEach(function (res) {\n        _this4.idArr.push(res.productId);\n      });\n\n      if (this.checkModel.length <= 0) {\n        this.$message({\n          type: \"warning\",\n          message: \"请勾选要删除的商品！\"\n        });\n      } else {\n        this.$confirm(\"您可以选择删除商品，或移入收藏夹。\", \"您是要删除该商品吗？\", {\n          confirmButtonText: \"移入收藏夹\",\n          cancelButtonText: \"删除\",\n          type: \"warning\",\n          center: true,\n          closeOnPressEscape: false,\n          distinguishCancelAndClose: true\n        }).then(function () {\n          // 移入收藏夹\n          _this4.collectionGoods(_this4.idArr);\n        }).catch(function (action) {\n          message: action === \"cancel\" ? _this4.delCartProduct(_this4.idArr) : \"\";\n        });\n      }\n    },\n    // 收藏商品接口\n    collectionGoods: function collectionGoods(ids) {\n      var _this5 = this;\n\n      this.$confirm(\"移动后选中的商品将不在购物车中显示!\", \"移到收藏夹\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n        center: true\n      }).then(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this5.$http.post(\"/api/member/collection/addProduct?ids=\".concat(ids));\n\n              case 2:\n                res = _context3.sent;\n\n                if (res.code === 200) {\n                  _this5.$message({\n                    type: \"success\",\n                    message: \"操作成功！\"\n                  });\n\n                  _this5.delCartProduct(ids);\n                } else {\n                  _this5.$message({\n                    type: \"warning\",\n                    message: \"收藏失败！\"\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))).catch(function () {\n        _this5.$message({\n          type: \"info\",\n          message: \"已取消收藏!\"\n        });\n      });\n    },\n    // 收藏单个商品事件\n    collectQuote: function collectQuote(id) {\n      this.collectionGoods(id);\n    },\n    //收藏多个商品事件\n    collectMultiple: function collectMultiple() {\n      var _this6 = this;\n\n      this.selectedGoods.forEach(function (res) {\n        _this6.idArr.push(res.productId);\n      });\n\n      if (this.checkModel.length <= 0) {\n        this.$message({\n          type: \"warning\",\n          message: \"请勾选要收藏的商品！\"\n        });\n      } else {\n        this.collectionGoods(this.idArr);\n      }\n    },\n    // 结账\n    settleAccounts: function () {\n      var _settleAccounts = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.checkModel.length > 0)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                this.isDisable = true;\n                _context4.next = 4;\n                return this.$http.post(\"/api/member/cart/settleAccounts\", this.selectedGoods);\n\n              case 4:\n                res = _context4.sent;\n                this.$store.state.submitOrderGoods = res.data.cartPromotionItemList;\n                this.isDisable = false;\n                this.$store.state.orderNumber = res.data.orderSn;\n                this.$router.push(\"/shopping/submitOrder\");\n                this.getShoppingCartData();\n                _context4.next = 13;\n                break;\n\n              case 12:\n                this.$message({\n                  type: \"warning\",\n                  message: \"请选择要购买的商品！\"\n                });\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function settleAccounts() {\n        return _settleAccounts.apply(this, arguments);\n      }\n\n      return settleAccounts;\n    }()\n  }\n};",{"version":3,"sources":["shoppingCart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"shopping-cart\" v-cloak>\r\n    <!-- 购物车页面 -->\r\n    <div class=\"cartListContainer\">\r\n      <!-- 当无商品时 -->\r\n      <div class=\"no_pro_wraper\" v-if=\"orderList.length<=0?goodsShow=true:goodsShow=false\">\r\n        <span>\r\n          <i class=\"el-icon-shopping-cart-2\"></i>\r\n        </span>\r\n        <span>\r\n          <p class=\"no_goods_txt\">当前购物车暂时没有商品，您可以选择</p>\r\n          <p>\r\n            <a href=\"javascript:;\" @click=\"goToCollect\">查看收藏夹</a>\r\n            或\r\n            <a href=\"javascript:;\" @click=\"refurbish\">选购商品</a>\r\n          </p>\r\n        </span>\r\n      </div>\r\n\r\n      <!-- 当有商品时 -->\r\n      <div class=\"pro_wraper\" v-if=\"orderList.length>0?goodsShow=true:goodsShow=false\">\r\n        <div class=\"cart_msg\">\r\n          <p>购物车商品只保留3个月，请及时提交订单，暂时不需要购买的商品，建议您选择“移入收藏夹”。</p>\r\n        </div>\r\n        <div class=\"cart_list\">\r\n          <ul class=\"thead\">\r\n            <li>\r\n              <el-checkbox v-model=\"checkAll\" @change=\"setCheckedAll\">\r\n                <i>现货商品</i>\r\n              </el-checkbox>\r\n            </li>\r\n            <li>商品编号</li>\r\n            <li>商品信息</li>\r\n            <li>单价(含增值税)</li>\r\n            <li>数量</li>\r\n            <li>金额(含增值税)</li>\r\n            <li>操作</li>\r\n          </ul>\r\n          <ul class=\"tbody\">\r\n            <li class=\"list_box\" v-for=\"(item,index) in orderList\" :key=\"index\">\r\n              <ul class=\"each_item\">\r\n                <li class=\"check\">\r\n                  <el-checkbox-group v-model=\"checkModel\" @change=\"setCheckedModel\">\r\n                    <el-checkbox :label=\"item\">\r\n                      <img :src=\"item.picPath\" alt>\r\n                    </el-checkbox>\r\n                  </el-checkbox-group>\r\n                </li>\r\n                <li class=\"numble\">{{item.productSn}}</li>\r\n                <li class=\"message\">\r\n                  <p>\r\n                    <a href=\"#\" class=\"productName\">{{item.productName}}</a>\r\n                  </p>\r\n                  <p>\r\n                    <a href=\"#\">{{item.productType}}</a>\r\n                    <a href=\"#\">{{item.productSpecifications}}</a>\r\n                  </p>\r\n                  <p>\r\n                    <span>{{item.brandName}}</span>\r\n                    <span style=\"color:#f00;\">(1{{item.unit}}有{{item.unitNum}}个)</span>\r\n                  </p>\r\n                </li>\r\n                <li class=\"unit_price\" @mousemove=\"boxShow(item.productId)\" @mouseleave=\"boxHide\">\r\n                  <el-tooltip placement=\"bottom\" effect=\"light\" style=\"width:100px;\">\r\n                    <div slot=\"content\">\r\n                      多行信息\r\n                      <br>第二行信息\r\n                    </div>\r\n                    <div>\r\n                      <span>￥{{item.productPrice}}</span>\r\n                      <i class=\"el-icon-arrow-down\"></i>\r\n                    </div>\r\n                  </el-tooltip>\r\n                </li>\r\n                <li class=\"amount\">\r\n                  <el-input-number\r\n                    size=\"mini\"\r\n                    v-model=\"item.productNumber\"\r\n                    :value=\"item.productNumber\"\r\n                    @change=\"handleChange\"\r\n                    :min=\"1\"\r\n                    :max=\"10\"\r\n                  ></el-input-number>\r\n                  <p>\r\n                    商品库存:\r\n                    <i>{{item.stock}}</i>个\r\n                  </p>\r\n                </li>\r\n                <li class=\"sum\">\r\n                  ￥\r\n                  <i>{{(item.productNumber*item.productPrice).toFixed(2)}}</i>\r\n                </li>\r\n                <li class=\"operation\">\r\n                  <p>\r\n                    <a href=\"javascript:;\" @click=\"collectQuote(item.productId)\">移入收藏夹</a>\r\n                    <a href=\"javascript:;\" @click=\"delQuote(item.productId)\">删除</a>\r\n                  </p>\r\n                  <!-- <el-input placeholder=\"材料编号\" prefix-icon=\"el-icon-edit\" size=\"mini\"></el-input> -->\r\n                </li>\r\n              </ul>\r\n              <!-- <div class=\"pop-up-box\" v-show=\"popUpBox\">\r\n                <ul>\r\n                  <li>单价（含增值税）:</li>\r\n                  <li>\r\n                    <span>1~9个 :</span>\r\n                    <i>￥25.22</i>\r\n                  </li>\r\n                  <li>\r\n                    <span>10个以上 :</span>\r\n                    <i>￥24.8</i>\r\n                  </li>\r\n                </ul>\r\n                <span class=\"arrows\"></span>\r\n              </div>-->\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"settle_accounts\">\r\n          <div class=\"del\">\r\n            <a href=\"javascript:;\" @click=\"delMultiple\">\r\n              <i class=\"el-icon-delete-solid\"></i>删除\r\n            </a>\r\n            <a href=\"javascript:;\" @click=\"collectMultiple\">\r\n              <i class=\"el-icon-star-off\"></i>移入收藏夹\r\n            </a>\r\n            <a href=\"javascript:;\">\r\n              <i class=\"el-icon-tickets\"></i>导出至Excel\r\n            </a>\r\n          </div>\r\n          <div class=\"payment\">\r\n            <span>\r\n              已选中\r\n              <i>{{checkModel.length}}</i>种商品\r\n            </span>\r\n            <span>\r\n              总价(不含运费):￥\r\n              <i>{{getTotalPrice.toFixed(2)}}</i>\r\n            </span>\r\n            <el-button type=\"warning\" @click=\"settleAccounts\" :disabled=\"isDisable\">结算</el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"speed_add\">\r\n        <h3>根据商品编号快速添加购物车</h3>\r\n        <div>\r\n          <span>商品编号 : &nbsp;&nbsp;</span>\r\n          <el-input></el-input>\r\n          <span>数量 : &nbsp;&nbsp;</span>\r\n          <el-input></el-input>\r\n          <el-button type=\"primary\">添加</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { log } from \"util\";\r\nimport { Promise } from \"q\";\r\nimport { promises } from \"fs\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      isDisable: false,\r\n      checkModel: [],\r\n      checkAll: false, // 全选\r\n      popUpBox: false, // 增值税弹出框\r\n      getTotalPrice: 0, // 商品总价\r\n      orderList: [], //订单列表信息\r\n      selectedGoods: [], //选中的商品\r\n      goodsShow: false,\r\n      idArr: []\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getShoppingCartData();\r\n    this.common.setCheckedAll();\r\n  },\r\n\r\n  methods: {\r\n    refurbish() {\r\n      this.$router.push(\"/\");\r\n      this.reload();\r\n    },\r\n    //回到首页\r\n    goToindex() {\r\n      this.reload();\r\n      this.$router.push(\"/\");\r\n    },\r\n    // 获取购物车列表\r\n    async getShoppingCartData() {\r\n      let res = await this.$http.post(\"/api/member/cart/list\");\r\n      this.orderList = res.data;\r\n    },\r\n    // 实现多选框全选反选功能\r\n    setCheckedAll(val) {\r\n      this.checkModel = val ? this.orderList : [];\r\n      if (this.checkAll) {\r\n        this.orderList.forEach(res => {\r\n          this.selectedGoods = this.orderList;\r\n          this.getTotalPrice += res.productNumber * res.productPrice;\r\n        });\r\n      } else {\r\n        this.getTotalPrice = 0;\r\n      }\r\n    },\r\n    setCheckedModel(value) {\r\n      let checkedCount = value.length;\r\n      this.checkAll = checkedCount === this.orderList.length;\r\n      this.getTotalPrice = 0;\r\n      value.forEach(res => {\r\n        this.getTotalPrice += res.productNumber * res.productPrice;\r\n      });\r\n      this.selectedGoods = value;\r\n    },\r\n    // 跳转到收藏夹\r\n    goToCollect() {\r\n      this.$router.push(\"/shopping/member/favorite\");\r\n      this.reload();\r\n    },\r\n\r\n    // 计数器\r\n    handleChange(value) {\r\n      console.log(value);\r\n      // this.getTotalPrice = value\r\n    },\r\n\r\n    // 增值税显示隐藏\r\n    boxShow(id) {\r\n      this.popUpBox = true;\r\n    },\r\n    boxHide(id) {\r\n      this.popUpBox = false;\r\n    },\r\n\r\n    // 删除购物车商品接口\r\n    async delCartProduct(ids) {\r\n      let res = await this.$http.post(\r\n        `/api/member/cart/delete?productId=${ids}`\r\n      );\r\n      if (res.code === 200) {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"操作成功！\"\r\n        });\r\n        this.getShoppingCartData();\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"删除失败！\"\r\n        });\r\n      }\r\n    },\r\n\r\n    // 删除单个商品事件\r\n    delQuote(id) {\r\n      this.$confirm(\r\n        \"您可以选择删除商品，或移入收藏夹。\",\r\n        \"您是要删除该商品吗？\",\r\n        {\r\n          confirmButtonText: \"移入收藏夹\",\r\n          cancelButtonText: \"删除\",\r\n          type: \"warning\",\r\n          center: true,\r\n          closeOnPressEscape: false,\r\n          distinguishCancelAndClose: true\r\n        }\r\n      )\r\n        .then(() => {\r\n          // 移入收藏夹\r\n          this.collectionGoods(id);\r\n        })\r\n        .catch(action => {\r\n          message: action === \"cancel\" ? this.delCartProduct(id) : \"\";\r\n        });\r\n    },\r\n\r\n    //删除多个商品事件\r\n    delMultiple() {\r\n      this.selectedGoods.forEach(res => {\r\n        this.idArr.push(res.productId);\r\n      });\r\n      if (this.checkModel.length <= 0) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请勾选要删除的商品！\"\r\n        });\r\n      } else {\r\n        this.$confirm(\r\n          \"您可以选择删除商品，或移入收藏夹。\",\r\n          \"您是要删除该商品吗？\",\r\n          {\r\n            confirmButtonText: \"移入收藏夹\",\r\n            cancelButtonText: \"删除\",\r\n            type: \"warning\",\r\n            center: true,\r\n            closeOnPressEscape: false,\r\n            distinguishCancelAndClose: true\r\n          }\r\n        )\r\n          .then(() => {\r\n            // 移入收藏夹\r\n            this.collectionGoods(this.idArr);\r\n          })\r\n          .catch(action => {\r\n            message: action === \"cancel\" ? this.delCartProduct(this.idArr) : \"\";\r\n          });\r\n      }\r\n    },\r\n\r\n    // 收藏商品接口\r\n    collectionGoods(ids) {\r\n      this.$confirm(\"移动后选中的商品将不在购物车中显示!\", \"移到收藏夹\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n        center: true\r\n      })\r\n        .then(async () => {\r\n          let res = await this.$http.post(\r\n            `/api/member/collection/addProduct?ids=${ids}`\r\n          );\r\n          if (res.code === 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"操作成功！\"\r\n            });\r\n            this.delCartProduct(ids);\r\n          } else {\r\n            this.$message({\r\n              type: \"warning\",\r\n              message: \"收藏失败！\"\r\n            });\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消收藏!\"\r\n          });\r\n        });\r\n    },\r\n    // 收藏单个商品事件\r\n    collectQuote(id) {\r\n      this.collectionGoods(id);\r\n    },\r\n\r\n    //收藏多个商品事件\r\n    collectMultiple() {\r\n      this.selectedGoods.forEach(res => {\r\n        this.idArr.push(res.productId);\r\n      });\r\n      if (this.checkModel.length <= 0) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请勾选要收藏的商品！\"\r\n        });\r\n      } else {\r\n        this.collectionGoods(this.idArr);\r\n      }\r\n    },\r\n\r\n    // 结账\r\n    async settleAccounts() {\r\n      if (this.checkModel.length > 0) {\r\n        this.isDisable = true;\r\n        let res = await this.$http.post(\r\n          \"/api/member/cart/settleAccounts\",\r\n          this.selectedGoods\r\n        );\r\n        this.$store.state.submitOrderGoods = res.data.cartPromotionItemList;\r\n        this.isDisable = false;\r\n        this.$store.state.orderNumber = res.data.orderSn;\r\n        this.$router.push(\"/shopping/submitOrder\");\r\n\r\n        this.getShoppingCartData();\r\n      } else {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请选择要购买的商品！\"\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scope>\r\n#shopping-cart {\r\n  .cartListContainer {\r\n    //   当无商品时\r\n    .no_pro_wraper {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      margin: 60px 0;\r\n      span {\r\n        &:nth-last-of-type(1) {\r\n          margin-left: 20px;\r\n          a {\r\n            color: #0193e6;\r\n          }\r\n        }\r\n        i {\r\n          font-size: 70px;\r\n          color: #cccccc;\r\n        }\r\n        .no_goods_txt {\r\n          margin-bottom: 15px;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 当有商品时\r\n    .cart_msg {\r\n      line-height: 40px;\r\n      background: #fcf2e8;\r\n      margin: 20px 0 15px 0;\r\n      padding-left: 15px;\r\n      border-radius: 5px;\r\n      border: 1px solid #f3d4b8;\r\n    }\r\n    .cart_list {\r\n      width: 100%;\r\n      .thead {\r\n        line-height: 40px;\r\n        background-color: #f4f4f4;\r\n        border: 1px solid #eaeaea;\r\n        border-bottom: 2px solid #eaeaea;\r\n        display: flex;\r\n        li {\r\n          text-align: left;\r\n          &:nth-of-type(1) {\r\n            width: 12%;\r\n          }\r\n          &:nth-of-type(2) {\r\n            width: 12%;\r\n          }\r\n          &:nth-of-type(3) {\r\n            width: 25%;\r\n          }\r\n          &:nth-of-type(4) {\r\n            width: 12%;\r\n          }\r\n          &:nth-of-type(5) {\r\n            width: 15%;\r\n            text-align: center;\r\n          }\r\n          &:nth-of-type(6) {\r\n            width: 12%;\r\n            text-align: center;\r\n          }\r\n          &:nth-last-of-type(1) {\r\n            width: 12%;\r\n            text-align: center;\r\n          }\r\n        }\r\n      }\r\n      .tbody {\r\n        .list_box {\r\n          border-bottom: 1px solid #eaeaea;\r\n          position: relative;\r\n          .each_item {\r\n            li {\r\n              display: inline-block;\r\n              width: 12%;\r\n              padding: 20px 0;\r\n              vertical-align: text-top;\r\n            }\r\n            .check {\r\n              .el-checkbox__input {\r\n                vertical-align: top;\r\n              }\r\n              img {\r\n                display: block;\r\n                width: 60px;\r\n                height: 60px;\r\n              }\r\n            }\r\n            .message {\r\n              width: 25%;\r\n              line-height: 24px;\r\n              .productName {\r\n                display: block;\r\n                width: 100%;\r\n                box-sizing: border-box;\r\n                padding-right: 50px;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n                white-space: nowrap;\r\n              }\r\n            }\r\n            .unit_price {\r\n              i {\r\n                color: #0193e6;\r\n                margin-left: 25px;\r\n              }\r\n            }\r\n\r\n            .amount {\r\n              width: 15%;\r\n              text-align: center;\r\n              p {\r\n                margin-top: 5px;\r\n                color: #9a9a9a;\r\n              }\r\n            }\r\n\r\n            .sum {\r\n              color: #ff7800;\r\n              font-weight: bold;\r\n              text-align: center;\r\n            }\r\n            .operation {\r\n              p {\r\n                display: flex;\r\n                justify-content: space-between;\r\n                margin-bottom: 5px;\r\n                padding: 0 20px;\r\n              }\r\n            }\r\n          }\r\n\r\n          .pop-up-box {\r\n            position: absolute;\r\n            left: 550px;\r\n            top: 50px;\r\n            background-color: #e0e0e0;\r\n            width: 200px;\r\n            text-align: left;\r\n            padding: 10px;\r\n            z-index: 99;\r\n            border: 1px solid #cecccd;\r\n            li {\r\n              &:nth-of-type(1) {\r\n                text-align: center;\r\n                line-height: 24px;\r\n              }\r\n              span {\r\n                display: inline-block;\r\n                width: 100px;\r\n                text-align: right;\r\n              }\r\n              i {\r\n                color: #ff7900;\r\n              }\r\n            }\r\n\r\n            .arrows {\r\n              position: absolute;\r\n              left: 100px;\r\n              top: -45px;\r\n\r\n              width: 0;\r\n              height: 0;\r\n              border-width: 0 5px 5px;\r\n              border-style: solid;\r\n              border-color: transparent transparent #e0e0e0; /*透明 透明  灰*/\r\n              margin: 40px auto;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .settle_accounts {\r\n      height: 46px;\r\n      margin: 20px 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .del {\r\n        a {\r\n          line-height: 20px;\r\n          margin-right: 40px;\r\n          &:hover {\r\n            color: #ff7900;\r\n          }\r\n          i {\r\n            font-size: 20px;\r\n            color: #ff7900;\r\n          }\r\n        }\r\n      }\r\n      .payment {\r\n        span {\r\n          &:nth-of-type(2) {\r\n            margin: 0 20px;\r\n          }\r\n          i {\r\n            font-weight: bold;\r\n            font-size: 20px;\r\n            color: #ff7900;\r\n          }\r\n        }\r\n        .el-button {\r\n          padding: 10px 26px;\r\n        }\r\n      }\r\n    }\r\n    .speed_add {\r\n      padding-left: 30px;\r\n      h3 {\r\n        font-size: 14px;\r\n        line-height: 40px;\r\n        font-weight: bold;\r\n        color: #5c5e5c;\r\n      }\r\n      div {\r\n        margin-bottom: 20px;\r\n        .el-input {\r\n          width: 200px;\r\n          height: 30px;\r\n          margin-right: 10px;\r\n          .el-input__inner {\r\n            width: 100%;\r\n            height: 100%;\r\n            line-height: 30px;\r\n          }\r\n        }\r\n        .el-button {\r\n          padding: 7px 18px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n"],"sourceRoot":"src/components/pages/tabPages"}]}